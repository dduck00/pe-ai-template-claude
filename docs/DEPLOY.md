# Deployment Contract

## 환경변수 계약

| 변수명 | 필수 | 타입 | 포맷/제약 | 설명 |
|--------|------|------|-----------|------|
<!-- APP_SECRET | Y | Runtime | 32자 이상 | 앱 시크릿 -->
<!-- DATABASE_URL | Y | Runtime | postgresql://... | DB 접속 URL -->

### 소스별 필수 변수 매핑

| 소스 | 포함 변수 |
|------|-----------|
| `.env` (서버) | ... |
| `docker-compose.yml` | ... |
| `.env.example` | ... |
| CI/CD secrets | ... |
| 앱 설정 파일 | ... |

## 인프라 파일 인벤토리

| 파일 | 역할 |
|------|------|
<!-- Dockerfile | 앱 컨테이너 이미지 -->
<!-- docker-compose.yml | 서비스 오케스트레이션 -->
<!-- nginx.conf | Reverse proxy -->

## 타임존 통일 정책

모든 레이어에서 동일 타임존 사용:
- **컨테이너**: docker-compose에 `TZ=...`
- **앱 런타임**: 프레임워크별 TZ 설정
- **OS**: 서버 타임존 설정

## 배포 런북

### 초기 세팅 (1회)
1. 서버 프로비저닝
2. 환경변수 설정
3. SSL 인증서 발급
4. 서비스 기동

### 이후 배포
<!-- CI/CD 자동 배포 절차 또는 수동 절차 -->

## 롤백/복구 절차

### 애플리케이션 롤백
1. 이전 빌드 아티팩트 복원
2. 서비스 재기동

### DB 백업/복원
1. 백업 위치 및 주기
2. 복원 절차

## 배포 후 검증 체크리스트

- [ ] 메인 페이지 접속 확인
- [ ] 헬스체크 엔드포인트 정상
- [ ] 핵심 플로우 수동 검증
- [ ] HTTPS 리다이렉트 정상
- [ ] 컨테이너 로그 에러 없음

## 알려진 제약사항
<!-- 서버 스펙, DB 제약, 확장 한계 등 -->
